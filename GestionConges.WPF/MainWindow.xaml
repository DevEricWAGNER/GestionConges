<Window x:Class="GestionConges.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="JungLogistique - Gestion des Congés" 
        Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource Background}"
        WindowStyle="None"
        AllowsTransparency="True">

    <Border CornerRadius="12" Background="{StaticResource Background}" 
            BorderBrush="{StaticResource Gray300}" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Custom Title Bar -->
            <Border Grid.Row="0" Background="{StaticResource Surface}" 
                    CornerRadius="12,12,0,0" 
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid Height="50">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Logo et titre -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" 
                              VerticalAlignment="Center" Margin="20,0">
                        <Border Background="{StaticResource Primary}" 
                              Width="32" Height="32" 
                              CornerRadius="8" Margin="0,0,12,0">
                            <TextBlock Text="📅" FontSize="18" 
                                     HorizontalAlignment="Center" 
                                     VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="JungLogistique" 
                                     FontSize="16" FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="Gestion des Congés" 
                                     FontSize="11" 
                                     Foreground="{StaticResource TextMuted}"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Infos utilisateur -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" 
                              VerticalAlignment="Center" Margin="0,0,20,0">

                        <!-- Avatar -->
                        <Border Background="{StaticResource Primary}" 
                              Width="36" Height="36" 
                              CornerRadius="18" Margin="0,0,12,0">
                            <TextBlock Text="👤" FontSize="18" 
                                     Foreground="White"
                                     HorizontalAlignment="Center" 
                                     VerticalAlignment="Center"/>
                        </Border>

                        <!-- Info utilisateur -->
                        <StackPanel VerticalAlignment="Center" Margin="0,0,16,0">
                            <TextBlock Name="TxtUtilisateurNom" 
                                     Text="Utilisateur connecté" 
                                     FontWeight="SemiBold" FontSize="14"
                                     Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Name="TxtUtilisateurRole" 
                                     Text="Rôle" FontSize="12"
                                     Foreground="{StaticResource TextMuted}"/>
                        </StackPanel>

                        <!-- Bouton Mon Profil -->
                        <Button Name="BtnMonProfil" 
                              Content="👤" 
                              Style="{StaticResource MaterialDesignOutlineButton}"
                              Width="36" Height="36"
                              Padding="0" Margin="0,0,8,0"
                              ToolTip="Mon Profil"
                              Click="BtnMonProfil_Click"/>

                        <!-- Bouton Déconnexion -->
                        <Button Name="BtnDeconnexion" 
                              Content="⏻" 
                              Style="{StaticResource MaterialDesignOutlineButton}"
                              Width="36" Height="36"
                              Padding="0"
                              ToolTip="Déconnexion"
                              Click="BtnDeconnexion_Click"/>
                    </StackPanel>

                    <!-- Window Controls -->
                    <StackPanel Grid.Column="3" Orientation="Horizontal" 
                              VerticalAlignment="Center">
                        <Button Name="BtnMinimize" Content="−" 
                              Width="40" Height="30" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource TextSecondary}"
                              Click="BtnMinimize_Click"/>
                        <Button Name="BtnMaximize" Content="□" 
                              Width="40" Height="30" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource TextSecondary}"
                              Click="BtnMaximize_Click"/>
                        <Button x:Name="BtnClose" Content="x" 
                              Width="40" Height="30" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource TextSecondary}"
                              Click="BtnClose_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Contenu principal -->
            <Grid Grid.Row="1" Margin="20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="280"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Sidebar Navigation -->
                <Border Grid.Column="0" Style="{StaticResource Card}" 
                        Margin="0,0,0,20" VerticalAlignment="Stretch">
                    <StackPanel>
                        <!-- Section Navigation -->
                        <TextBlock Text="Navigation" 
                                 FontSize="12" FontWeight="SemiBold" 
                                 Foreground="{StaticResource TextMuted}" 
                                 Margin="0,0,0,12"/>

                        <Button Name="BtnAccueil" 
                              Content="🏠  Accueil" 
                              Style="{StaticResource NavButtonActive}"
                              Margin="0,0,0,4"
                              Click="BtnAccueil_Click"/>

                        <Button Name="BtnMesConges" 
                              Content="📅  Mes Congés" 
                              Style="{StaticResource NavButton}"
                              Margin="0,0,0,4"
                              Click="BtnMesConges_Click"/>

                        <Button Name="BtnCalendrier" 
                              Content="📊  Calendrier Équipe" 
                              Style="{StaticResource NavButton}"
                              Margin="0,0,0,4"
                              Click="BtnCalendrier_Click"/>

                        <Button Name="BtnValidation" 
                              Content="✅  Validations" 
                              Style="{StaticResource NavButton}"
                              Margin="0,0,0,12"
                              Visibility="Collapsed"
                              Click="BtnValidation_Click"/>

                        <!-- Section Admin -->
                        <TextBlock Name="TxtSectionAdmin" 
                                 Text="Administration" 
                                 FontSize="12" FontWeight="SemiBold" 
                                 Foreground="{StaticResource TextMuted}" 
                                 Margin="0,12,0,12"
                                 Visibility="Collapsed"/>

                        <Button Name="BtnAdmin" 
                              Content="⚙️  Administration" 
                              Style="{StaticResource NavButton}"
                              Visibility="Collapsed"
                              Click="BtnAdmin_Click"/>

                        <!-- Quick Actions -->
                        <Border Background="{StaticResource Gray50}" 
                              CornerRadius="8" Padding="16" 
                              Margin="0,24,0,0">
                            <StackPanel>
                                <TextBlock Text="Actions Rapides" 
                                         FontSize="12" FontWeight="SemiBold" 
                                         Foreground="{StaticResource TextMuted}" 
                                         Margin="0,0,0,12"/>

                                <Button Content="📝  Nouvelle Demande" 
                                      Style="{StaticResource MaterialDesignRaisedButton}"
                                      HorizontalAlignment="Stretch"
                                      Margin="0,0,0,8"
                                      Click="BtnNouvelleDemandeRaccourci_Click"/>

                                <TextBlock Name="TxtStatutRapide" 
                                         Text="0 demandes en attente" 
                                         FontSize="11" 
                                         Foreground="{StaticResource TextMuted}"
                                         HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </Border>

                <!-- Main Content Area -->
                <Border Grid.Column="2" Style="{StaticResource Card}" 
                        VerticalAlignment="Stretch">
                    <Grid Name="ContentArea">
                        <!-- Contenu par défaut - Dashboard -->
                        <ScrollViewer>
                            <StackPanel Margin="20">

                                <!-- Header Section -->
                                <Grid Margin="0,0,0,32">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Name="TxtBienvenue" 
                                                 Text="Bienvenue dans votre espace congés !" 
                                                 FontSize="28" FontWeight="Bold" 
                                                 Foreground="{StaticResource TextPrimary}"
                                                 Margin="0,0,0,8"/>
                                        <TextBlock Text="Gérez vos demandes de congés en toute simplicité" 
                                                 FontSize="16" 
                                                 Foreground="{StaticResource TextSecondary}"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Source={x:Static sys:DateTime.Now}, StringFormat='dddd dd MMMM yyyy'}" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextSecondary}"
                                                 HorizontalAlignment="Right"/>
                                        <TextBlock Text="{Binding Source={x:Static sys:DateTime.Now}, StringFormat='HH:mm'}" 
                                                 FontSize="24" FontWeight="Bold"
                                                 Foreground="{StaticResource Primary}"
                                                 HorizontalAlignment="Right"/>
                                    </StackPanel>
                                </Grid>

                                <!-- Stats Cards -->
                                <Grid Margin="0,0,0,32">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Solde Congés -->
                                    <Border Grid.Column="0" Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray200}" BorderThickness="1"
                                          CornerRadius="12" Padding="20" Margin="0,0,8,0">
                                        <StackPanel>
                                            <TextBlock Text="💰" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                            <TextBlock Text="25.5" FontSize="24" FontWeight="Bold" 
                                                     Foreground="{StaticResource Secondary}"
                                                     HorizontalAlignment="Center"/>
                                            <TextBlock Text="Jours restants" FontSize="12" 
                                                     Foreground="{StaticResource TextMuted}"
                                                     HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Demandes en cours -->
                                    <Border Grid.Column="1" Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray200}" BorderThickness="1"
                                          CornerRadius="12" Padding="20" Margin="4,0">
                                        <StackPanel>
                                            <TextBlock Text="⏳" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                            <TextBlock Text="2" FontSize="24" FontWeight="Bold" 
                                                     Foreground="{StaticResource Warning}"
                                                     HorizontalAlignment="Center"/>
                                            <TextBlock Text="En attente" FontSize="12" 
                                                     Foreground="{StaticResource TextMuted}"
                                                     HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Congés cette année -->
                                    <Border Grid.Column="2" Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray200}" BorderThickness="1"
                                          CornerRadius="12" Padding="20" Margin="4,0">
                                        <StackPanel>
                                            <TextBlock Text="📅" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                            <TextBlock Text="12" FontSize="24" FontWeight="Bold" 
                                                     Foreground="{StaticResource Primary}"
                                                     HorizontalAlignment="Center"/>
                                            <TextBlock Text="Jours pris" FontSize="12" 
                                                     Foreground="{StaticResource TextMuted}"
                                                     HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Équipe -->
                                    <Border Grid.Column="3" Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray200}" BorderThickness="1"
                                          CornerRadius="12" Padding="20" Margin="8,0,0,0">
                                        <StackPanel>
                                            <TextBlock Text="👥" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                            <TextBlock Text="3" FontSize="24" FontWeight="Bold" 
                                                     Foreground="{StaticResource Danger}"
                                                     HorizontalAlignment="Center"/>
                                            <TextBlock Text="Absents aujourd'hui" FontSize="12" 
                                                     Foreground="{StaticResource TextMuted}"
                                                     HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>
                                </Grid>

                                <!-- Activité Récente -->
                                <Border Background="{StaticResource Surface}" 
                                      BorderBrush="{StaticResource Gray200}" BorderThickness="1"
                                      CornerRadius="12" Padding="24">
                                    <StackPanel>
                                        <Grid Margin="0,0,0,16">
                                            <TextBlock Text="Activité Récente" 
                                                     FontSize="18" FontWeight="SemiBold" 
                                                     Foreground="{StaticResource TextPrimary}"/>
                                            <Button Content="Voir tout" 
                                                  Style="{StaticResource MaterialDesignOutlineButton}"
                                                  Padding="12,6" FontSize="12"
                                                  HorizontalAlignment="Right"
                                                  Click="BtnMesConges_Click"/>
                                        </Grid>

                                        <!-- Liste activité -->
                                        <StackPanel>
                                            <Border Background="{StaticResource Gray50}" 
                                                  CornerRadius="8" Padding="16" Margin="0,0,0,8">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>

                                                    <Border Grid.Column="0" Background="{StaticResource Secondary}" 
                                                          Width="8" Height="40" CornerRadius="4" Margin="0,0,16,0"/>

                                                    <StackPanel Grid.Column="1">
                                                        <TextBlock Text="Demande approuvée" FontWeight="SemiBold" 
                                                                 Foreground="{StaticResource TextPrimary}"/>
                                                        <TextBlock Text="Congés Payés du 15/01 au 19/01 (5 jours)" 
                                                                 FontSize="12" Foreground="{StaticResource TextMuted}"/>
                                                    </StackPanel>

                                                    <TextBlock Grid.Column="2" Text="Il y a 2h" 
                                                             FontSize="12" Foreground="{StaticResource TextMuted}"
                                                             VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>

                                            <Border Background="{StaticResource Gray50}" 
                                                  CornerRadius="8" Padding="16" Margin="0,0,0,8">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>

                                                    <Border Grid.Column="0" Background="{StaticResource Warning}" 
                                                          Width="8" Height="40" CornerRadius="4" Margin="0,0,16,0"/>

                                                    <StackPanel Grid.Column="1">
                                                        <TextBlock Text="Demande en attente" FontWeight="SemiBold" 
                                                                 Foreground="{StaticResource TextPrimary}"/>
                                                        <TextBlock Text="RTT du 22/01 au 22/01 (1 jour)" 
                                                                 FontSize="12" Foreground="{StaticResource TextMuted}"/>
                                                    </StackPanel>

                                                    <TextBlock Grid.Column="2" Text="Hier" 
                                                             FontSize="12" Foreground="{StaticResource TextMuted}"
                                                             VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                            </StackPanel>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>