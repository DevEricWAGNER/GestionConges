<UserControl x:Class="GestionConges.WPF.Controls.CalendrierControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="White">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- En-tête avec navigation -->
        <Border Grid.Row="0" Background="#F5F5F5" BorderBrush="#DDDDDD" BorderThickness="0,0,0,1" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Bouton mois précédent -->
                <Button Grid.Column="0" Name="BtnPrecedent" 
                        Content="◀ Précédent" 
                        Background="#2196F3" Foreground="White" BorderThickness="0"
                        Padding="15,8" Margin="0,0,10,0"
                        Click="BtnPrecedent_Click"/>

                <!-- Titre mois/année -->
                <StackPanel Grid.Column="1" Orientation="Vertical" HorizontalAlignment="Center">
                    <TextBlock Name="TxtTitreMois" 
                             Text="Janvier 2025"
                             FontSize="24" FontWeight="Bold"
                             HorizontalAlignment="Center"/>
                    <TextBlock Name="TxtStatutCalendrier"
                             Text="Chargement..."
                             FontSize="12" Foreground="Gray"
                             HorizontalAlignment="Center"/>
                </StackPanel>

                <!-- Bouton mois suivant -->
                <Button Grid.Column="2" Name="BtnSuivant" 
                        Content="Suivant ▶" 
                        Background="#2196F3" Foreground="White" BorderThickness="0"
                        Padding="15,8" Margin="10,0,0,0"
                        Click="BtnSuivant_Click"/>
            </Grid>
        </Border>

        <!-- Barre de filtres -->
        <Border Grid.Row="1" Background="White" BorderBrush="#DDDDDD" BorderThickness="0,0,0,1" Padding="15">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="🔍 Filtres :" FontWeight="SemiBold" VerticalAlignment="Center" Margin="0,0,15,0"/>

                <!-- Filtre par pôle -->
                <TextBlock Text="Pôle :" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <ComboBox Name="CmbFiltrePole" Width="150" Padding="5" Margin="0,0,15,0"
                        SelectionChanged="CmbFiltrePole_SelectionChanged">
                    <ComboBoxItem Content="Tous les pôles" IsSelected="True"/>
                </ComboBox>

                <!-- Filtre par type d'absence -->
                <TextBlock Text="Type :" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <ComboBox Name="CmbFiltreType" Width="150" Padding="5" Margin="0,0,15,0"
                        SelectionChanged="CmbFiltreType_SelectionChanged">
                    <ComboBoxItem Content="Tous les types" IsSelected="True"/>
                </ComboBox>

                <!-- Bouton aujourd'hui -->
                <Button Name="BtnAujourdhui" Content="📅 Aujourd'hui"
                        Background="#4CAF50" Foreground="White" BorderThickness="0"
                        Padding="12,6" Margin="10,0,0,0"
                        Click="BtnAujourdhui_Click"/>

                <!-- Bouton actualiser -->
                <Button Name="BtnActualiser" Content="🔄 Actualiser"
                        Background="#FF9800" Foreground="White" BorderThickness="0"
                        Padding="12,6" Margin="10,0,0,0"
                        Click="BtnActualiser_Click"/>
            </StackPanel>
        </Border>

        <!-- Grille calendrier -->
        <Border Grid.Row="2" BorderBrush="#DDDDDD" BorderThickness="1" Margin="10">
            <Grid Name="GridCalendrier" Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="40"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- En-têtes jours semaine -->
                <Border Grid.Row="0" Grid.Column="0" BorderBrush="#DDDDDD" BorderThickness="0,0,1,1" Background="#F8F8F8">
                    <TextBlock Text="Lundi" FontWeight="SemiBold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
                <Border Grid.Row="0" Grid.Column="1" BorderBrush="#DDDDDD" BorderThickness="0,0,1,1" Background="#F8F8F8">
                    <TextBlock Text="Mardi" FontWeight="SemiBold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
                <Border Grid.Row="0" Grid.Column="2" BorderBrush="#DDDDDD" BorderThickness="0,0,1,1" Background="#F8F8F8">
                    <TextBlock Text="Mercredi" FontWeight="SemiBold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
                <Border Grid.Row="0" Grid.Column="3" BorderBrush="#DDDDDD" BorderThickness="0,0,1,1" Background="#F8F8F8">
                    <TextBlock Text="Jeudi" FontWeight="SemiBold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
                <Border Grid.Row="0" Grid.Column="4" BorderBrush="#DDDDDD" BorderThickness="0,0,1,1" Background="#F8F8F8">
                    <TextBlock Text="Vendredi" FontWeight="SemiBold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
                <Border Grid.Row="0" Grid.Column="5" BorderBrush="#DDDDDD" BorderThickness="0,0,1,1" Background="#FFEBEE">
                    <TextBlock Text="Samedi" FontWeight="SemiBold" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#F44336"/>
                </Border>
                <Border Grid.Row="0" Grid.Column="6" BorderBrush="#DDDDDD" BorderThickness="0,0,0,1" Background="#FFEBEE">
                    <TextBlock Text="Dimanche" FontWeight="SemiBold" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#F44336"/>
                </Border>

                <!-- Cases dynamiques générées dans le code -->
            </Grid>
        </Border>

        <!-- Légende améliorée -->
        <Border Grid.Row="3" Background="#F5F5F5" BorderBrush="#DDDDDD" BorderThickness="0,1,0,0" Padding="15">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Première ligne : légende types -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,10">
                    <TextBlock Text="🎨 Types d'absences :" FontWeight="SemiBold" VerticalAlignment="Center" Margin="0,0,15,0"/>

                    <StackPanel Name="PanneauLegendeTypes" Orientation="Horizontal"/>
                </StackPanel>

                <!-- Deuxième ligne : informations -->
                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Name="TxtNombrePersonnes" Text="👥 0 personnes" VerticalAlignment="Center" Margin="0,0,20,0"/>
                    <TextBlock Name="TxtNombreConges" Text="📅 0 congés ce mois" VerticalAlignment="Center" Margin="0,0,20,0"/>
                    <TextBlock Text="💡 Survolez les cases pour plus de détails" FontStyle="Italic" Foreground="Gray" VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>