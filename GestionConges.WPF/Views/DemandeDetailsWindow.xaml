<Window x:Class="GestionConges.WPF.Views.DemandeDetailsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Détails de la Demande" 
        Height="600" Width="500"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5"
        ResizeMode="NoResize">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Titre avec statut -->
        <Border Grid.Row="0" Background="White" BorderBrush="#DDDDDD" BorderThickness="1" 
                Padding="15" Margin="0,0,0,15" CornerRadius="5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="📋" FontSize="24" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <TextBlock Grid.Column="1" Name="TxtTitre" Text="Détails de la Demande"
                         FontSize="18" FontWeight="Bold" VerticalAlignment="Center"/>
                <Border Grid.Column="2" Name="BorderStatut" Padding="10,5" CornerRadius="15" 
                        VerticalAlignment="Center">
                    <TextBlock Name="TxtStatut" Text="STATUT" FontWeight="SemiBold" 
                             Foreground="White" FontSize="12"/>
                </Border>
            </Grid>
        </Border>

        <!-- Contenu principal -->
        <ScrollViewer Grid.Row="1" Padding="5">
            <StackPanel>

                <!-- Informations principales -->
                <Border Background="White" BorderBrush="#DDDDDD" BorderThickness="1" 
                        Padding="15" Margin="0,0,0,15" CornerRadius="5">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Type -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="🏷️ Type :" FontWeight="SemiBold" 
                                 Margin="0,5"/>
                        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="0,5">
                            <Border Name="BorderTypeColor" Width="20" Height="15" 
                                  Margin="0,0,10,0" VerticalAlignment="Center"/>
                            <TextBlock Name="TxtType" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Période -->
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="📅 Période :" FontWeight="SemiBold" 
                                 Margin="0,5"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Name="TxtPeriode" Margin="0,5"/>

                        <!-- Durée -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="⏱️ Durée :" FontWeight="SemiBold" 
                                 Margin="0,5"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Name="TxtDuree" Margin="0,5"/>

                        <!-- Demandeur -->
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="👤 Demandeur :" FontWeight="SemiBold" 
                                 Margin="0,5"/>
                        <TextBlock Grid.Row="3" Grid.Column="1" Name="TxtDemandeur" Margin="0,5"/>
                    </Grid>
                </Border>

                <!-- Commentaires -->
                <Border Name="BorderCommentaire" Background="White" BorderBrush="#DDDDDD" BorderThickness="1" 
                        Padding="15" Margin="0,0,0,15" CornerRadius="5" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="💬 Commentaire" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,10"/>
                        <TextBlock Name="TxtCommentaire" TextWrapping="Wrap" Background="#F8F8F8" 
                                 Padding="10" FontStyle="Italic"/>
                    </StackPanel>
                </Border>

                <!-- Motif de refus -->
                <Border Name="BorderRefus" Background="#FFEBEE" BorderBrush="#F44336" BorderThickness="1" 
                        Padding="15" Margin="0,0,0,15" CornerRadius="5" Visibility="Collapsed">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="❌" FontSize="16" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBlock Text="Motif de refus" FontWeight="SemiBold" FontSize="14" Foreground="#D32F2F"/>
                        </StackPanel>
                        <TextBlock Name="TxtMotifRefus" TextWrapping="Wrap" Foreground="#D32F2F"/>
                    </StackPanel>
                </Border>

                <!-- Informations techniques -->
                <Border Background="White" BorderBrush="#DDDDDD" BorderThickness="1" 
                        Padding="15" Margin="0,0,0,15" CornerRadius="5">
                    <StackPanel>
                        <TextBlock Text="📊 Informations techniques" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,10"/>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="130"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="🆔 ID :" FontSize="12" Margin="0,2"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Name="TxtId" FontSize="12" Margin="0,2"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="📝 Créée le :" FontSize="12" Margin="0,2"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" Name="TxtDateCreation" FontSize="12" Margin="0,2"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Name="LblDateModification" Text="✏️ Modifiée le :" 
                                     FontSize="12" Margin="0,2" Visibility="Collapsed"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" Name="TxtDateModification" FontSize="12" Margin="0,2"/>

                            <TextBlock Grid.Row="3" Grid.Column="0" Name="LblDateValidation" Text="✅ Validée le :" 
                                     FontSize="12" Margin="0,2" Visibility="Collapsed"/>
                            <TextBlock Grid.Row="3" Grid.Column="1" Name="TxtDateValidation" FontSize="12" Margin="0,2"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Historique des validations -->
                <Border Name="BorderValidations" Background="White" BorderBrush="#DDDDDD" BorderThickness="1" 
                        Padding="15" Margin="0,0,0,15" CornerRadius="5" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="📜 Historique des validations" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,10"/>
                        <ListView Name="LvValidations" MaxHeight="150" BorderThickness="0">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="{Binding ValidationIcon}" 
                                                 FontSize="16" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="{Binding ValidateurNom}" FontWeight="SemiBold"/>
                                            <TextBlock Text="{Binding Commentaire}" FontStyle="Italic" 
                                                     Visibility="{Binding CommentaireVisible}"/>
                                        </StackPanel>
                                        <TextBlock Grid.Column="2" Text="{Binding DateValidation}" 
                                                 FontSize="11" VerticalAlignment="Center" Foreground="Gray"/>
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- Boutons d'action -->
        <Border Grid.Row="2" Background="White" BorderBrush="#DDDDDD" BorderThickness="1,1,1,0" 
                Padding="15" CornerRadius="0,0,5,5">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Name="BtnModifier" Content="✏️ Modifier"
                        Background="#FF9800" Foreground="White" BorderThickness="0"
                        Padding="20,10" Margin="0,0,10,0"
                        Click="BtnModifier_Click" Visibility="Collapsed"/>

                <Button Name="BtnDupliquer" Content="📋 Dupliquer"
                        Background="#9C27B0" Foreground="White" BorderThickness="0"
                        Padding="20,10" Margin="0,0,10,0"
                        Click="BtnDupliquer_Click"/>

                <Button Name="BtnSupprimer" Content="🗑️ Supprimer"
                        Background="#F44336" Foreground="White" BorderThickness="0"
                        Padding="20,10" Margin="0,0,10,0"
                        Click="BtnSupprimer_Click" Visibility="Collapsed"/>

                <Button Name="BtnFermer" Content="🚪 Fermer"
                        Background="#757575" Foreground="White" BorderThickness="0"
                        Padding="20,10"
                        Click="BtnFermer_Click"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>