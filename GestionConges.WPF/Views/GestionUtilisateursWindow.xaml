<Window x:Class="GestionConges.WPF.Views.GestionUtilisateursWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gestion des Utilisateurs - JungLogistique" 
        Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Border CornerRadius="12" Background="{StaticResource Background}" 
            BorderBrush="{StaticResource Gray300}" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Custom Title Bar -->
            <Border Grid.Row="0" Background="{StaticResource Surface}" 
                    CornerRadius="12,12,0,0" 
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid Height="50">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Logo et titre -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" 
                              VerticalAlignment="Center" Margin="20,0">
                        <Border Background="{StaticResource Primary}" 
                              Width="32" Height="32" 
                              CornerRadius="8" Margin="0,0,12,0">
                            <TextBlock Text="👥" FontSize="18" 
                                     HorizontalAlignment="Center" 
                                     VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Gestion des Utilisateurs" 
                                     FontSize="16" FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="Administration" 
                                     FontSize="11" 
                                     Foreground="{StaticResource TextMuted}"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Window Controls -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" 
                              VerticalAlignment="Center">
                        <Button Name="BtnMinimize" Content="−" 
                              Width="40" Height="30" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource TextSecondary}"
                              Click="BtnMinimize_Click"/>
                        <Button Name="BtnMaximize" Content="□" 
                              Width="40" Height="30" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource TextSecondary}"
                              Click="BtnMaximize_Click"/>
                        <Button x:Name="BtnClose" Content="✕" 
                              Width="40" Height="30" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource TextSecondary}"
                              Click="BtnFermer_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Contenu principal -->
            <Grid Grid.Row="1" Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="1.5*"/>
                </Grid.ColumnDefinitions>

                <!-- Section Filtres et Recherche -->
                <Border Grid.Row="0" Grid.Column="0" 
                        Style="{StaticResource Card}" 
                        Padding="20" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="Recherche et Filtres" 
                                 FontSize="16" FontWeight="SemiBold" 
                                 Foreground="{StaticResource TextPrimary}"
                                 Margin="0,0,0,16"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Recherche -->
                            <TextBlock Grid.Column="0" Text="Recherche :" 
                                     VerticalAlignment="Center" Margin="0,0,10,0"
                                     FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                            <Border Grid.Column="1" Background="{StaticResource Surface}" 
                                  BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                   Padding="8">
                                <TextBox Name="TxtRecherche"
                                       Background="Transparent" BorderThickness="0"
                                       TextChanged="TxtRecherche_TextChanged"
                                       ToolTip="Rechercher par nom, prénom ou email"/>
                            </Border>

                            <!-- Société -->
                            <TextBlock Grid.Column="2" Text="Société :" 
                                     VerticalAlignment="Center" Margin="20,0,10,0"
                                     FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                            <Border Grid.Column="3" Background="{StaticResource Surface}" 
                                  BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                  >
                                <ComboBox Name="CmbFiltreSociete" 
                                        Background="Transparent" BorderThickness="0"
                                        Padding="8" SelectionChanged="CmbFiltreSociete_SelectionChanged"/>
                            </Border>

                            <!-- Équipe -->
                            <TextBlock Name="LblFiltreEquipe" Grid.Column="4" Text="Équipe :" 
                                     VerticalAlignment="Center" Margin="20,0,10,0" 
                                     Visibility="Collapsed"
                                     FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                            <Border Grid.Column="5" Background="{StaticResource Surface}" 
                                  BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                  >
                                <ComboBox Name="CmbFiltreEquipe" 
                                        Background="Transparent" BorderThickness="0"
                                        Padding="8" Visibility="Collapsed"
                                        SelectionChanged="CmbFiltreEquipe_SelectionChanged"/>
                            </Border>

                            <!-- Pôle -->
                            <TextBlock Name="LblFiltrePole" Grid.Column="6" Text="Pôle :" 
                                     VerticalAlignment="Center" Margin="20,0,10,0" 
                                     Visibility="Collapsed"
                                     FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                            <Border Grid.Column="7" Background="{StaticResource Surface}" 
                                  BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                  >
                                <ComboBox Name="CmbFiltrePole" 
                                        Background="Transparent" BorderThickness="0"
                                        Padding="8" Visibility="Collapsed"
                                        SelectionChanged="CmbFiltrePole_SelectionChanged"/>
                            </Border>

                            <!-- Checkbox Inactifs -->
                            <CheckBox Name="ChkAfficherInactifs" Grid.Column="9"
                                    Content="Afficher inactifs" 
                                    VerticalAlignment="Center" 
                                    Checked="ChkAfficherInactifs_Checked" 
                                    Unchecked="ChkAfficherInactifs_Unchecked"
                                    Foreground="{StaticResource TextPrimary}"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Liste des utilisateurs -->
                <Border Grid.Row="1" Grid.Column="0" 
                        Style="{StaticResource Card}" 
                        Padding="0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Header du tableau -->
                        <Border Grid.Row="0" Background="{StaticResource Gray50}" 
                              CornerRadius="12,12,0,0" 
                              BorderBrush="{StaticResource Gray200}" 
                              BorderThickness="0,0,0,1"
                              Padding="20,12">
                            <TextBlock Text="Liste des Utilisateurs" 
                                     FontSize="16" FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                        </Border>

                        <!-- DataGrid -->
                        <DataGrid Grid.Row="1" Name="DgUtilisateurs" 
                                AutoGenerateColumns="False"
                                IsReadOnly="True"
                                GridLinesVisibility="None"
                                HeadersVisibility="Column"
                                SelectionMode="Single"
                                Background="Transparent"
                                BorderThickness="0"
                                RowBackground="Transparent"
                                AlternatingRowBackground="{StaticResource Gray50}"
                                SelectionChanged="DgUtilisateurs_SelectionChanged"
                                Margin="20,10,20,10">

                            <DataGrid.Resources>
                                <!-- Override des brushes système pour la sélection -->
                                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#6366F1"/>
                                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="White"/>
                                <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="#6366F1"/>
                                <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}" Color="White"/>
                            </DataGrid.Resources>

                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Padding" Value="12,8"/>
                                    <Setter Property="BorderThickness" Value="0,0,0,1"/>
                                    <Setter Property="BorderBrush" Value="{StaticResource Gray200}"/>
                                </Style>
                            </DataGrid.ColumnHeaderStyle>

                            <DataGrid.RowStyle>
                                <Style TargetType="DataGridRow">
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Margin" Value="0,2"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Foreground" Value="Black"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Foreground" Value="Black"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGrid.RowStyle>

                            <DataGrid.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Padding" Value="12,8"/>
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" Value="{StaticResource Primary}"/>
                                            <Setter Property="Foreground" Value="White"/>
                                        </Trigger>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=IsSelected}" Value="True">
                                            <Setter Property="Background" Value="{StaticResource Primary}"/>
                                            <Setter Property="Foreground" Value="White"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGrid.CellStyle>

                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Nom" Binding="{Binding Nom}" Width="120"/>
                                <DataGridTextColumn Header="Prénom" Binding="{Binding Prenom}" Width="120"/>
                                <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="180"/>
                                <DataGridTextColumn Header="Rôle" Binding="{Binding RoleLibelle}" Width="120"/>
                                <DataGridTextColumn Header="Société" Binding="{Binding Societe.Nom}" Width="120"/>
                                <DataGridTextColumn Header="Équipe" Binding="{Binding Equipe.Nom}" Width="120"/>
                                <DataGridTextColumn Header="Pôle" Binding="{Binding Pole.Nom}" Width="100"/>
                                <DataGridCheckBoxColumn Header="Actif" Binding="{Binding Actif}" Width="60"/>
                                <DataGridTextColumn Header="Dernière Connexion" 
                                                  Binding="{Binding DerniereConnexion, StringFormat='dd/MM/yyyy HH:mm'}" 
                                                  Width="140"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <!-- Boutons d'action -->
                        <Border Grid.Row="2" Background="{StaticResource Gray50}" 
                              CornerRadius="0,0,12,12" 
                              BorderBrush="{StaticResource Gray200}" 
                              BorderThickness="0,1,0,0"
                              Padding="20,16">
                            <StackPanel Orientation="Horizontal">
                                <!-- Actions principales -->
                                <Button Name="BtnNouvelUtilisateur" Content="👤 Nouvel Utilisateur"
                                      Style="{StaticResource MaterialDesignRaisedButton}"
                                      Margin="0,0,12,0" Click="BtnNouvelUtilisateur_Click"/>

                                <Button Name="BtnModifier" Content="✏️ Modifier"
                                      Style="{StaticResource MaterialDesignOutlineButton}"
                                      Margin="0,0,12,0" 
                                      IsEnabled="False" Click="BtnModifier_Click"/>

                                <Button Name="BtnSupprimer" Content="🗑️ Supprimer"
                                      Background="{StaticResource Danger}" 
                                      Foreground="White" BorderThickness="0"
                                      Padding="12,8" Margin="0,0,12,0" 
                                      
                                      IsEnabled="False" Click="BtnSupprimer_Click"/>

                                <Button Name="BtnActiver" Content="🔄 Activer/Désactiver"
                                      Background="{StaticResource Secondary}" 
                                      Foreground="White" BorderThickness="0"
                                      Padding="12,8" Margin="0,0,24,0" 
                                      
                                      IsEnabled="False" Click="BtnActiver_Click"/>

                                <!-- Séparateur -->
                                <Border Width="1" Height="24" Background="{StaticResource Gray300}" Margin="12,0"/>

                                <!-- Actions de gestion -->
                                <Button Name="BtnGestionPoles" Content="🏢 Gérer les Pôles"
                                      Background="{StaticResource Warning}" 
                                      Foreground="White" BorderThickness="0"
                                      Padding="12,8" Margin="12,0,12,0" 
                                      
                                      Click="BtnGestionPoles_Click"/>

                                <Button Name="BtnGestionValidation" Content="✅ Gérer Validation"
                                      Background="#795548" 
                                      Foreground="White" BorderThickness="0"
                                      Padding="12,8" 
                                      Click="BtnGestionValidation_Click"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>

                <!-- Panneau de détail/édition -->
                <Border Grid.Row="0" Grid.RowSpan="2" Grid.Column="2" 
                        Style="{StaticResource Card}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Header du panneau -->
                        <Border Grid.Row="0" Background="{StaticResource Gray50}" 
                              CornerRadius="12,12,0,0" 
                              BorderBrush="{StaticResource Gray200}" 
                              BorderThickness="0,0,0,1"
                              Padding="20,16">
                            <TextBlock Text="Détails / Édition" 
                                     FontSize="16" FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                        </Border>

                        <!-- Contenu du formulaire -->
                        <ScrollViewer Grid.Row="1" Padding="20">
                            <StackPanel Name="PanneauDetail">

                                <!-- Informations de base -->
                                <TextBlock Text="Informations Personnelles" 
                                         FontSize="14" FontWeight="SemiBold" 
                                         Foreground="{StaticResource TextSecondary}"
                                         Margin="0,0,0,12"/>

                                <!-- Nom -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock Text="Nom" FontWeight="SemiBold" 
                                             Foreground="{StaticResource TextPrimary}" 
                                             Margin="0,0,0,6"/>
                                    <Border Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                           Padding="12,10">
                                        <TextBox Name="TxtNom" Background="Transparent" BorderThickness="0"/>
                                    </Border>
                                </StackPanel>

                                <!-- Prénom -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock Text="Prénom" FontWeight="SemiBold" 
                                             Foreground="{StaticResource TextPrimary}" 
                                             Margin="0,0,0,6"/>
                                    <Border Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                           Padding="12,10">
                                        <TextBox Name="TxtPrenom" Background="Transparent" BorderThickness="0"/>
                                    </Border>
                                </StackPanel>

                                <!-- Email -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock Text="Email" FontWeight="SemiBold" 
                                             Foreground="{StaticResource TextPrimary}" 
                                             Margin="0,0,0,6"/>
                                    <Border Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                           Padding="12,10">
                                        <TextBox Name="TxtEmail" Background="Transparent" BorderThickness="0"/>
                                    </Border>
                                </StackPanel>

                                <!-- Séparateur -->
                                <Border Height="1" Background="{StaticResource Gray200}" Margin="0,12,0,20"/>

                                <!-- Informations organisationnelles -->
                                <TextBlock Text="Organisation" 
                                         FontSize="14" FontWeight="SemiBold" 
                                         Foreground="{StaticResource TextSecondary}"
                                         Margin="0,0,0,12"/>

                                <!-- Rôle -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock Text="Rôle" FontWeight="SemiBold" 
                                             Foreground="{StaticResource TextPrimary}" 
                                             Margin="0,0,0,6"/>
                                    <Border Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                          >
                                        <ComboBox Name="CmbRole" Background="Transparent" BorderThickness="0" Padding="12,10">
                                            <ComboBoxItem Content="Employé" Tag="0"/>
                                            <ComboBoxItem Content="Employé / Valideur de congés" Tag="1"/>
                                            <ComboBoxItem Content="Employé / Admin" Tag="2"/>
                                        </ComboBox>
                                    </Border>
                                </StackPanel>

                                <!-- Société principale -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock Text="Société principale" FontWeight="SemiBold" 
                                             Foreground="{StaticResource TextPrimary}" 
                                             Margin="0,0,0,6"/>
                                    <Border Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                          >
                                        <ComboBox Name="CmbSociete" Background="Transparent" BorderThickness="0" 
                                                Padding="12,10" SelectionChanged="CmbSociete_SelectionChanged"/>
                                    </Border>
                                </StackPanel>

                                <!-- Équipe -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock Text="Équipe" FontWeight="SemiBold" 
                                             Foreground="{StaticResource TextPrimary}" 
                                             Margin="0,0,0,6"/>
                                    <Border Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                          >
                                        <ComboBox Name="CmbEquipe" Background="Transparent" BorderThickness="0" 
                                                Padding="12,10" SelectionChanged="CmbEquipe_SelectionChanged"/>
                                    </Border>
                                </StackPanel>

                                <!-- Pôle -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock Text="Pôle (optionnel)" FontWeight="SemiBold" 
                                             Foreground="{StaticResource TextPrimary}" 
                                             Margin="0,0,0,6"/>
                                    <Border Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                          >
                                        <ComboBox Name="CmbPole" Background="Transparent" BorderThickness="0" Padding="12,10"/>
                                    </Border>
                                </StackPanel>

                                <!-- Statut -->
                                <CheckBox Name="ChkActif" Content="Utilisateur actif" 
                                        Foreground="{StaticResource TextPrimary}"
                                        Margin="0,8,0,20"/>

                                <!-- Séparateur -->
                                <Border Height="1" Background="{StaticResource Gray200}" Margin="0,12,0,20"/>

                                <!-- Section Sociétés secondaires -->
                                <TextBlock Text="Sociétés Secondaires" 
                                         FontSize="14" FontWeight="SemiBold" 
                                         Foreground="{StaticResource TextSecondary}"
                                         Margin="0,0,0,12"/>

                                <Border Background="{StaticResource Surface}" 
                                      BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                       Padding="12" Margin="0,0,0,12">
                                    <ListBox Name="LstSocietesSecondaires" 
                                           Height="80" 
                                           Background="Transparent"
                                           BorderThickness="0">
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="{StaticResource Gray50}" 
                                                      CornerRadius="4" Padding="8,4" Margin="2">
                                                    <TextBlock Text="{Binding Societe.Nom}" 
                                                             FontSize="12"
                                                             Foreground="{StaticResource TextPrimary}"/>
                                                </Border>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </Border>

                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Grid.Column="0" Background="{StaticResource Surface}" 
                                          BorderBrush="{StaticResource Gray300}" BorderThickness="1"
                                           Margin="0,0,8,0">
                                        <ComboBox Name="CmbSocieteSecondaire" 
                                                Background="Transparent" BorderThickness="0" Padding="12,8"/>
                                    </Border>

                                    <Button Grid.Column="1" Name="BtnAjouterSocieteSecondaire" Content="➕"
                                          Background="{StaticResource Secondary}" 
                                          Foreground="White" BorderThickness="0"
                                          Width="36" Height="36" 
                                          Margin="0,0,8,0"
                                          IsEnabled="False" Click="BtnAjouterSocieteSecondaire_Click"
                                          ToolTip="Ajouter"/>

                                    <Button Grid.Column="2" Name="BtnRetirerSocieteSecondaire" Content="➖"
                                          Background="{StaticResource Danger}" 
                                          Foreground="White" BorderThickness="0"
                                          Width="36" Height="36" 
                                          IsEnabled="False" Click="BtnRetirerSocieteSecondaire_Click"
                                          ToolTip="Retirer"/>
                                </Grid>

                                <!-- Informations supplémentaires -->
                                <Border Background="{StaticResource Gray50}" 
                                       Padding="16" Margin="0,12,0,0">
                                    <TextBlock Name="TxtInfos" 
                                             Text="Sélectionnez un utilisateur pour voir les détails"
                                             TextWrapping="Wrap" FontStyle="Italic" 
                                             Foreground="{StaticResource TextMuted}"
                                             FontSize="12"/>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>

                        <!-- Boutons de validation -->
                        <Border Grid.Row="2" Background="{StaticResource Gray50}" 
                              CornerRadius="0,0,12,12" 
                              BorderBrush="{StaticResource Gray200}" 
                              BorderThickness="0,1,0,0"
                              Padding="20,16">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Name="BtnSauvegarder" Content="💾 Sauvegarder"
                                      Style="{StaticResource MaterialDesignRaisedButton}"
                                      Margin="0,0,12,0" 
                                      Click="BtnSauvegarder_Click" IsEnabled="False"/>

                                <Button Name="BtnAnnuler" Content="❌ Annuler"
                                      Style="{StaticResource MaterialDesignOutlineButton}"
                                      Click="BtnAnnuler_Click" IsEnabled="False"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>