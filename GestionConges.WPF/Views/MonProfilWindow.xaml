<Window x:Class="GestionConges.WPF.Views.MonProfilWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Mon Profil - Gestion des Congés" 
        Height="750" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        ResizeMode="CanResize"
        WindowStyle="None"
        AllowsTransparency="True">

    <Border CornerRadius="16" Background="{StaticResource Background}"
            BorderBrush="{StaticResource Gray300}" BorderThickness="1"
            Effect="{StaticResource ShadowLarge}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Custom Title Bar -->
            <Border Grid.Row="0" Background="{StaticResource Surface}" 
                    CornerRadius="16,16,0,0" 
                    BorderBrush="{StaticResource Gray200}" 
                    BorderThickness="0,0,0,1"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid Height="60" Margin="24,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Logo et titre -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" 
                              VerticalAlignment="Center">
                        <Border Background="{StaticResource Primary}" 
                              Width="40" Height="40" 
                              CornerRadius="12" Margin="0,0,16,0">
                            <TextBlock Text="👤" FontSize="20" 
                                     Foreground="White"
                                     HorizontalAlignment="Center" 
                                     VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Mon Profil" 
                                     FontSize="18" FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="Gestion du compte utilisateur" 
                                     FontSize="12" 
                                     Foreground="{StaticResource TextMuted}"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Boutons fenêtre -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" 
                              VerticalAlignment="Center">
                        <Button Name="BtnMinimize" Content="−" 
                              Width="32" Height="32" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource Gray400}"
                              FontSize="16" FontWeight="Bold"
                              Margin="0,0,4,0"
                              Click="BtnMinimize_Click"/>
                        <Button Name="BtnClose" Content="✕" 
                              Width="32" Height="32" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource Gray400}"
                              FontSize="14" FontWeight="Bold"
                              Click="BtnClose_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Contenu principal avec onglets -->
            <TabControl Grid.Row="1" Background="Transparent" 
                        BorderThickness="0" Margin="32,20,32,0">
                <TabControl.Style>
                    <Style TargetType="TabControl">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TabControl">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!-- Tab Headers -->
                                        <Border Grid.Row="0" 
                                                Background="{StaticResource Surface}"
                                                BorderBrush="{StaticResource Gray200}"
                                                BorderThickness="1"
                                                CornerRadius="12,12,0,0"
                                                Margin="0,0,0,0">
                                            <TabPanel IsItemsHost="True" Margin="8,0"/>
                                        </Border>

                                        <!-- Content -->
                                        <Border Grid.Row="1" 
                                                Background="{StaticResource Surface}"
                                                BorderBrush="{StaticResource Gray200}"
                                                BorderThickness="1,0,1,1"
                                                CornerRadius="0,0,12,12">
                                            <ContentPresenter ContentSource="SelectedContent"/>
                                        </Border>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </TabControl.Style>

                <!-- Style pour les TabItems -->
                <TabControl.Resources>
                    <Style TargetType="TabItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TabItem">
                                    <Border Name="Border" 
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Padding="20,12"
                                            Margin="4,4,4,0"
                                            CornerRadius="8,8,0,0">
                                        <ContentPresenter ContentSource="Header"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Border" Property="Background" Value="{StaticResource Primary}"/>
                                            <Setter Property="Foreground" Value="White"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Border" Property="Background" Value="{StaticResource Gray100}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
                        <Setter Property="FontSize" Value="14"/>
                    </Style>
                </TabControl.Resources>

                <!-- Onglet Informations personnelles -->
                <TabItem Header="Informations personnelles">
                    <ScrollViewer Padding="32" Background="{StaticResource Surface}">
                        <StackPanel MaxWidth="700">

                            <!-- Section Identité -->
                            <Border Style="{StaticResource Card}" Margin="0,0,0,24">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                        <Border Background="{StaticResource Secondary}" 
                                              Width="32" Height="32" 
                                              CornerRadius="8" Margin="0,0,12,0">
                                            <TextBlock Text="🆔" FontSize="16" 
                                                     Foreground="White"
                                                     HorizontalAlignment="Center" 
                                                     VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Identité" 
                                                 FontSize="16" FontWeight="SemiBold" 
                                                 Foreground="{StaticResource TextPrimary}"
                                                 VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="20"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- Nom -->
                                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                                 Text="Nom" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="1" Grid.Column="0" 
                                               Name="TxtNom" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"
                                               Margin="0,0,0,16"/>

                                        <!-- Prénom -->
                                        <TextBlock Grid.Row="0" Grid.Column="2" 
                                                 Text="Prénom" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="1" Grid.Column="2" 
                                               Name="TxtPrenom" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"
                                               Margin="0,0,0,16"/>

                                        <!-- Email -->
                                        <TextBlock Grid.Row="2" Grid.Column="0" 
                                                 Text="Adresse email" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="3" Grid.Column="0" 
                                               Name="TxtEmail" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Section Organisation -->
                            <Border Style="{StaticResource Card}" Margin="0,0,0,24">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                        <Border Background="{StaticResource Warning}" 
                                              Width="32" Height="32" 
                                              CornerRadius="8" Margin="0,0,12,0">
                                            <TextBlock Text="🏢" FontSize="16" 
                                                     Foreground="White"
                                                     HorizontalAlignment="Center" 
                                                     VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Organisation" 
                                                 FontSize="16" FontWeight="SemiBold" 
                                                 Foreground="{StaticResource TextPrimary}"
                                                 VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="20"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- Rôle -->
                                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                                 Text="Rôle" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="1" Grid.Column="0" 
                                               Name="TxtRole" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"
                                               Margin="0,0,0,16"/>

                                        <!-- Société -->
                                        <TextBlock Grid.Row="0" Grid.Column="2" 
                                                 Text="Société" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="1" Grid.Column="2" 
                                               Name="TxtSociete" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"
                                               Margin="0,0,0,16"/>

                                        <!-- Équipe -->
                                        <TextBlock Grid.Row="2" Grid.Column="0" 
                                                 Text="Équipe" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="3" Grid.Column="0" 
                                               Name="TxtEquipe" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"
                                               Margin="0,0,0,16"/>

                                        <!-- Pôle -->
                                        <TextBlock Grid.Row="2" Grid.Column="2" 
                                                 Text="Pôle" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="3" Grid.Column="2" 
                                               Name="TxtPole" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"
                                               Margin="0,0,0,16"/>

                                        <!-- Sociétés secondaires -->
                                        <TextBlock Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="3"
                                                 Text="Sociétés secondaires" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,8,0,8"/>
                                        <Grid Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="3">
                                            <ListBox Name="LstSocietesSecondaires" 
                                                   Height="80" 
                                                   Background="{StaticResource Gray50}"
                                                   BorderBrush="{StaticResource Gray300}" 
                                                   BorderThickness="1"
                                                   Padding="12"
                                                   IsEnabled="False">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Societe.Nom}" 
                                                                 Foreground="{StaticResource TextSecondary}"/>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>
                                            <TextBlock Text="Aucune société secondaire" 
                                                     Name="TxtAucuneSocieteSecondaire"
                                                     FontStyle="Italic" 
                                                     Foreground="{StaticResource TextMuted}" 
                                                     Margin="12,30,0,0"
                                                     Visibility="Collapsed"/>
                                        </Grid>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Section Informations compte -->
                            <Border Style="{StaticResource Card}">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                        <Border Background="{StaticResource Primary}" 
                                              Width="32" Height="32" 
                                              CornerRadius="8" Margin="0,0,12,0">
                                            <TextBlock Text="🔐" FontSize="16" 
                                                     Foreground="White"
                                                     HorizontalAlignment="Center" 
                                                     VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Informations du compte" 
                                                 FontSize="16" FontWeight="SemiBold" 
                                                 Foreground="{StaticResource TextPrimary}"
                                                 VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="20"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- Date de création -->
                                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                                 Text="Compte créé le" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="1" Grid.Column="0" 
                                               Name="TxtDateCreation" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"
                                               Margin="0,0,0,16"/>

                                        <!-- Dernière connexion -->
                                        <TextBlock Grid.Row="0" Grid.Column="2" 
                                                 Text="Dernière connexion" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="1" Grid.Column="2" 
                                               Name="TxtDerniereConnexion" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"
                                               Margin="0,0,0,16"/>

                                        <!-- Statut -->
                                        <TextBlock Grid.Row="2" Grid.Column="0" 
                                                 Text="Statut du compte" 
                                                 FontSize="14" FontWeight="SemiBold"
                                                 Foreground="{StaticResource TextPrimary}" 
                                                 Margin="0,0,0,8"/>
                                        <TextBox Grid.Row="3" Grid.Column="0" 
                                               Name="TxtStatut" 
                                               Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                               IsEnabled="False" 
                                               Background="{StaticResource Gray50}"
                                               Foreground="{StaticResource TextSecondary}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- Onglet Mot de passe -->
                <TabItem Header="Changer le mot de passe">
                    <ScrollViewer Background="{StaticResource Surface}">
                        <StackPanel Margin="80" VerticalAlignment="Center" MaxWidth="450">

                            <StackPanel Orientation="Horizontal" 
                                      HorizontalAlignment="Center" 
                                      Margin="0,0,0,32">
                                <Border Background="{StaticResource Danger}" 
                                      Width="48" Height="48" 
                                      CornerRadius="16" Margin="0,0,16,0">
                                    <TextBlock Text="🔒" FontSize="24" 
                                             Foreground="White"
                                             HorizontalAlignment="Center" 
                                             VerticalAlignment="Center"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="Modification du mot de passe" 
                                             FontSize="20" FontWeight="Bold" 
                                             Foreground="{StaticResource TextPrimary}"/>
                                    <TextBlock Text="Sécurisez votre compte" 
                                             FontSize="14" 
                                             Foreground="{StaticResource TextMuted}"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Mot de passe actuel -->
                            <TextBlock Text="Mot de passe actuel" 
                                     FontSize="14" FontWeight="SemiBold"
                                     Foreground="{StaticResource TextPrimary}" 
                                     Margin="0,0,0,8"/>
                            <PasswordBox Name="TxtMotDePasseActuel" 
                                       Style="{StaticResource MaterialDesignFloatingHintPasswordBox}"
                                       Margin="0,0,0,20"/>

                            <!-- Nouveau mot de passe -->
                            <TextBlock Text="Nouveau mot de passe" 
                                     FontSize="14" FontWeight="SemiBold"
                                     Foreground="{StaticResource TextPrimary}" 
                                     Margin="0,0,0,8"/>
                            <PasswordBox Name="TxtNouveauMotDePasse" 
                                       Style="{StaticResource MaterialDesignFloatingHintPasswordBox}"
                                       Margin="0,0,0,20"/>

                            <!-- Confirmer nouveau mot de passe -->
                            <TextBlock Text="Confirmer le nouveau mot de passe" 
                                     FontSize="14" FontWeight="SemiBold"
                                     Foreground="{StaticResource TextPrimary}" 
                                     Margin="0,0,0,8"/>
                            <PasswordBox Name="TxtConfirmerMotDePasse" 
                                       Style="{StaticResource MaterialDesignFloatingHintPasswordBox}"
                                       Margin="0,0,0,24"/>

                            <!-- Message d'erreur -->
                            <Border Name="ErrorPanelPassword"
                                  Background="{StaticResource Surface}" 
                                  BorderBrush="{StaticResource Danger}" 
                                  BorderThickness="2" 
                                  CornerRadius="8" 
                                  Padding="16"
                                  Margin="0,0,0,24"
                                  Visibility="Collapsed">
                                <StackPanel Orientation="Horizontal">
                                    <Border Background="{StaticResource Danger}" 
                                          Width="24" Height="24" CornerRadius="12" 
                                          Margin="0,0,12,0">
                                        <TextBlock Text="!" 
                                                 Foreground="White" FontWeight="Bold"
                                                 HorizontalAlignment="Center" 
                                                 VerticalAlignment="Center"/>
                                    </Border>
                                    <TextBlock Name="TxtErrorPassword" 
                                             Foreground="{StaticResource Danger}" 
                                             FontWeight="SemiBold"
                                             TextWrapping="Wrap" 
                                             VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>

                            <!-- Bouton changer mot de passe -->
                            <Button Name="BtnChangerMotDePasse" 
                                  Content="🔄 Changer le mot de passe"
                                  Style="{StaticResource MaterialDesignRaisedButton}"
                                  Height="48" FontSize="14" FontWeight="SemiBold"
                                  Margin="0,0,0,32"
                                  Click="BtnChangerMotDePasse_Click"/>

                            <!-- Conseils sécurité -->
                            <Border Background="{StaticResource Secondary}" 
                                  CornerRadius="12" 
                                  Padding="20">
                                <Border.Effect>
                                    <DropShadowEffect Color="#10B981" 
                                                    Opacity="0.1" ShadowDepth="0" BlurRadius="16"/>
                                </Border.Effect>
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                        <Border Background="White" 
                                              Width="28" Height="28" 
                                              CornerRadius="14" 
                                              Margin="0,0,12,0">
                                            <TextBlock Text="💡" FontSize="14" 
                                                     HorizontalAlignment="Center" 
                                                     VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Conseils pour un mot de passe sécurisé" 
                                                 FontWeight="SemiBold" 
                                                 Foreground="White"
                                                 VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <StackPanel Margin="40,0,0,0">
                                        <TextBlock Text="• Au moins 8 caractères" 
                                                 FontSize="13" 
                                                 Foreground="White" 
                                                 Opacity="0.9"
                                                 Margin="0,0,0,4"/>
                                        <TextBlock Text="• Mélange de lettres, chiffres et symboles" 
                                                 FontSize="13" 
                                                 Foreground="White" 
                                                 Opacity="0.9"
                                                 Margin="0,0,0,4"/>
                                        <TextBlock Text="• Évitez les mots du dictionnaire" 
                                                 FontSize="13" 
                                                 Foreground="White" 
                                                 Opacity="0.9"
                                                 Margin="0,0,0,4"/>
                                        <TextBlock Text="• Ne réutilisez pas vos autres mots de passe" 
                                                 FontSize="13" 
                                                 Foreground="White" 
                                                 Opacity="0.9"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- Onglet Préférences -->
                <TabItem Header="Préférences">
                    <ScrollViewer Padding="32" Background="{StaticResource Surface}">
                        <StackPanel MaxWidth="600">

                            <StackPanel Orientation="Horizontal" 
                                      HorizontalAlignment="Center" 
                                      Margin="0,20,0,40">
                                <Border Background="{StaticResource Warning}" 
                                      Width="48" Height="48" 
                                      CornerRadius="16" Margin="0,0,16,0">
                                    <TextBlock Text="⚙️" FontSize="24" 
                                             Foreground="White"
                                             HorizontalAlignment="Center" 
                                             VerticalAlignment="Center"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="Préférences utilisateur" 
                                             FontSize="20" FontWeight="Bold" 
                                             Foreground="{StaticResource TextPrimary}"/>
                                    <TextBlock Text="Personnalisez votre expérience" 
                                             FontSize="14" 
                                             Foreground="{StaticResource TextMuted}"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Section Notifications -->
                            <Border Style="{StaticResource Card}" Margin="0,0,0,24">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                        <Border Background="{StaticResource Primary}" 
                                              Width="32" Height="32" 
                                              CornerRadius="8" Margin="0,0,12,0">
                                            <TextBlock Text="🔔" FontSize="16" 
                                                     Foreground="White"
                                                     HorizontalAlignment="Center" 
                                                     VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Notifications" 
                                                 FontSize="16" FontWeight="SemiBold" 
                                                 Foreground="{StaticResource TextPrimary}"
                                                 VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <StackPanel>
                                        <CheckBox Name="ChkNotificationEmail" 
                                                Content="Recevoir les notifications par email" 
                                                Margin="0,0,0,12" 
                                                FontSize="14"
                                                Foreground="{StaticResource TextPrimary}"
                                                IsChecked="True"/>
                                        <CheckBox Name="ChkNotificationValidation" 
                                                Content="M'alerter quand mes demandes sont validées/refusées" 
                                                Margin="0,0,0,12" 
                                                FontSize="14"
                                                Foreground="{StaticResource TextPrimary}"
                                                IsChecked="True"/>
                                        <CheckBox Name="ChkNotificationRappel" 
                                                Content="Rappels pour les demandes en attente" 
                                                Margin="0,0,0,12" 
                                                FontSize="14"
                                                Foreground="{StaticResource TextPrimary}"
                                                IsChecked="False"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Section Interface -->
                            <Border Style="{StaticResource Card}" Margin="0,0,0,32">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                        <Border Background="{StaticResource Secondary}" 
                                              Width="32" Height="32" 
                                              CornerRadius="8" Margin="0,0,12,0">
                                            <TextBlock Text="🎨" FontSize="16" 
                                                     Foreground="White"
                                                     HorizontalAlignment="Center" 
                                                     VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Interface" 
                                                 FontSize="16" FontWeight="SemiBold" 
                                                 Foreground="{StaticResource TextPrimary}"
                                                 VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,16">
                                            <TextBlock Text="Format de date :" 
                                                     FontSize="14" FontWeight="SemiBold"
                                                     Foreground="{StaticResource TextPrimary}"
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,16,0"/>
                                            <ComboBox Name="CmbFormatDate" 
                                                    Width="150" 
                                                    Height="40"
                                                    FontSize="14"
                                                    Background="{StaticResource Surface}"
                                                    BorderBrush="{StaticResource Gray300}"
                                                    BorderThickness="1"
                                                    Padding="12,8">
                                                <ComboBoxItem Content="dd/MM/yyyy" IsSelected="True"/>
                                                <ComboBoxItem Content="MM/dd/yyyy"/>
                                                <ComboBoxItem Content="yyyy-MM-dd"/>
                                            </ComboBox>
                                        </StackPanel>

                                        <CheckBox Grid.Row="1" Name="ChkAffichageCompact" 
                                                Content="Affichage compact des listes" 
                                                FontSize="14"
                                                Foreground="{StaticResource TextPrimary}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Boutons préférences -->
                            <StackPanel Orientation="Horizontal" 
                                      HorizontalAlignment="Center">
                                <Button Name="BtnSauvegarderPreferences" 
                                      Content="💾 Sauvegarder les préférences"
                                      Style="{StaticResource SecondaryButton}"
                                      Padding="24,12" 
                                      Margin="0,0,12,0"
                                      Click="BtnSauvegarderPreferences_Click"/>
                                <Button Name="BtnResetPreferences" 
                                      Content="🔄 Réinitialiser"
                                      Background="{StaticResource Gray500}" 
                                      Foreground="White" 
                                      BorderThickness="0"
                                      Style="{StaticResource MaterialDesignRaisedButton}"
                                      Padding="24,12"
                                      Click="BtnResetPreferences_Click"/>
                            </StackPanel>

                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

            </TabControl>

            <!-- Bouton fermer -->
            <Border Grid.Row="2" 
                    Background="{StaticResource Surface}" 
                    BorderBrush="{StaticResource Gray200}" 
                    BorderThickness="0,1,0,0" 
                    CornerRadius="0,0,16,16"
                    Padding="32,16">
                <Button Name="BtnFermer" Content="✕ Fermer"
                      Style="{StaticResource MaterialDesignOutlineButton}"
                      Padding="20,10"
                      HorizontalAlignment="Right"
                      Click="BtnFermer_Click"/>
            </Border>
        </Grid>
    </Border>
</Window>