<Window x:Class="GestionConges.WPF.Views.GestionTypesAbsencesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gestion des Types d'Absences - Administration" 
        Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        ResizeMode="CanResize"
        WindowStyle="None"
        AllowsTransparency="True">

    <Border CornerRadius="16" Background="{StaticResource Background}"
            BorderBrush="{StaticResource Gray300}" BorderThickness="1"
            Effect="{StaticResource ShadowLarge}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Custom Title Bar -->
            <Border Grid.Row="0" Background="{StaticResource Surface}" 
                    CornerRadius="16,16,0,0" 
                    BorderBrush="{StaticResource Gray200}" 
                    BorderThickness="0,0,0,1"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid Height="60" Margin="24,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Logo et titre -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" 
                              VerticalAlignment="Center">
                        <Border Background="{StaticResource Warning}" 
                              Width="40" Height="40" 
                              CornerRadius="12" Margin="0,0,16,0">
                            <TextBlock Text="🏷️" FontSize="20" 
                                     Foreground="White"
                                     HorizontalAlignment="Center" 
                                     VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Gestion des Types d'Absences" 
                                     FontSize="18" FontWeight="SemiBold" 
                                     Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="Configuration des types de congés" 
                                     FontSize="12" 
                                     Foreground="{StaticResource TextMuted}"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Boutons fenêtre -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" 
                              VerticalAlignment="Center">
                        <Button Name="BtnMinimize" Content="−" 
                              Width="32" Height="32" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource Gray400}"
                              FontSize="16" FontWeight="Bold"
                              Margin="0,0,4,0"
                              Click="BtnMinimize_Click"/>
                        <Button Name="BtnClose" Content="✕" 
                              Width="32" Height="32" 
                              Background="Transparent" 
                              BorderThickness="0" 
                              Foreground="{StaticResource Gray400}"
                              FontSize="14" FontWeight="Bold"
                              Click="BtnClose_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Contenu principal -->
            <Grid Grid.Row="1" Margin="32,20,32,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="24"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <!-- Liste des types -->
                <Border Grid.Column="0" Style="{StaticResource Card}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- En-tête avec actions -->
                        <Border Grid.Row="0" 
                                Background="{StaticResource Primary}" 
                                CornerRadius="8,8,0,0" 
                                Padding="20,16">
                            <Grid>
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <Border Background="White" 
                                          Width="28" Height="28" 
                                          CornerRadius="8" Margin="0,0,12,0">
                                        <TextBlock Text="📋" FontSize="14" 
                                                 HorizontalAlignment="Center" 
                                                 VerticalAlignment="Center"/>
                                    </Border>
                                    <TextBlock Text="Types d'Absences" 
                                             FontWeight="SemiBold" FontSize="16" 
                                             Foreground="White"
                                             VerticalAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal" 
                                          HorizontalAlignment="Right">
                                    <Button Name="BtnNouveauType" Content="+ Nouveau"
                                          Background="{StaticResource Secondary}" 
                                          Foreground="White" 
                                          BorderThickness="0"
                                          Style="{StaticResource MaterialDesignRaisedButton}"
                                          Padding="16,8" 
                                          Margin="0,0,8,0" 
                                          Click="BtnNouveauType_Click"/>
                                    <Button Name="BtnActualiser" Content="🔄"
                                          Background="White" 
                                          Foreground="{StaticResource Primary}" 
                                          BorderThickness="0"
                                          Style="{StaticResource MaterialDesignRaisedButton}"
                                          Padding="10,8" 
                                          Click="BtnActualiser_Click"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- DataGrid des types -->
                        <DataGrid Grid.Row="1" Name="DgTypesAbsences" 
                                AutoGenerateColumns="False"
                                IsReadOnly="True"
                                GridLinesVisibility="None"
                                HeadersVisibility="Column"
                                SelectionMode="Single"
                                SelectionChanged="DgTypesAbsences_SelectionChanged"
                                CanUserReorderColumns="False"
                                CanUserResizeColumns="True"
                                Background="{StaticResource Surface}"
                                BorderThickness="0"
                                RowHeight="56"
                                AlternatingRowBackground="{StaticResource Gray50}"
                                AlternationCount="2">

                            <DataGrid.Resources>
                                <!-- Style pour les en-têtes de colonnes -->
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="{StaticResource Gray100}"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="FontSize" Value="13"/>
                                    <Setter Property="Padding" Value="16,12"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Height" Value="44"/>
                                    <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="DataGridColumnHeader">
                                                <Border Background="{TemplateBinding Background}"
                                                        BorderBrush="{StaticResource Gray200}"
                                                        BorderThickness="0,0,0,1"
                                                        Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>

                                <!-- Style pour les cellules -->
                                <Style TargetType="DataGridCell">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Padding" Value="16,8"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="DataGridCell">
                                                <Border Background="{TemplateBinding Background}"
                                                        BorderThickness="0"
                                                        Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="Foreground" Value="White"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGrid.Resources>

                            <DataGrid.Columns>
                                <!-- Ordre -->
                                <DataGridTextColumn Header="📊 Ordre" Binding="{Binding OrdreAffichage}" Width="80"/>

                                <!-- Couleur avec aperçu -->
                                <DataGridTemplateColumn Header="🎨 Couleur" Width="120">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Border Width="32" Height="20" Background="{Binding CouleurHex}" 
                                                      BorderBrush="{StaticResource Gray300}" 
                                                      BorderThickness="1" 
                                                      CornerRadius="4"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="{Binding CouleurHex}" 
                                                         FontSize="11" 
                                                         FontFamily="Consolas"
                                                         Foreground="{StaticResource TextMuted}"
                                                         VerticalAlignment="Center"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <!-- Nom -->
                                <DataGridTextColumn Header="🏷️ Nom" Binding="{Binding Nom}" Width="180">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <!-- Description -->
                                <DataGridTextColumn Header="📝 Description" Binding="{Binding Description}" Width="220">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
                                            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <!-- Validation requise -->
                                <DataGridTemplateColumn Header="✅ Validation" Width="100">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Border Background="{StaticResource Gray50}"
                                                  CornerRadius="12" 
                                                  Padding="8,4"
                                                  HorizontalAlignment="Center">
                                                <TextBlock HorizontalAlignment="Center"
                                                         FontSize="12"
                                                         FontWeight="SemiBold">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding NecessiteValidation}" Value="True">
                                                                    <Setter Property="Text" Value="Requise"/>
                                                                    <Setter Property="Foreground" Value="{StaticResource Secondary}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding NecessiteValidation}" Value="False">
                                                                    <Setter Property="Text" Value="Auto"/>
                                                                    <Setter Property="Foreground" Value="{StaticResource Warning}"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Border>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <!-- Actif -->
                                <DataGridTemplateColumn Header="🔄 Statut" Width="80">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Border CornerRadius="12" 
                                                  Padding="8,4"
                                                  HorizontalAlignment="Center">
                                                <Border.Style>
                                                    <Style TargetType="Border">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Actif}" Value="True">
                                                                <Setter Property="Background" Value="{StaticResource Secondary}"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Actif}" Value="False">
                                                                <Setter Property="Background" Value="{StaticResource Gray400}"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <TextBlock FontSize="12" 
                                                         FontWeight="SemiBold"
                                                         Foreground="White"
                                                         HorizontalAlignment="Center">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Actif}" Value="True">
                                                                    <Setter Property="Text" Value="Actif"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Actif}" Value="False">
                                                                    <Setter Property="Text" Value="Inactif"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Border>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <!-- Utilisations -->
                                <DataGridTextColumn Header="📊 Utilisé" Binding="{Binding NombreUtilisations}" Width="80">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="HorizontalAlignment" Value="Center"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                            <Setter Property="Foreground" Value="{StaticResource Primary}"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                            </DataGrid.Columns>

                            <!-- Style des lignes -->
                            <DataGrid.RowStyle>
                                <Style TargetType="DataGridRow">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Margin" Value="0"/>
                                    <Setter Property="Padding" Value="0"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="DataGridRow">
                                                <Border Name="RowBorder"
                                                        Background="{TemplateBinding Background}"
                                                        BorderThickness="0"
                                                        CornerRadius="6"
                                                        Margin="8,2"
                                                        Padding="8,0">
                                                    <SelectiveScrollingGrid>
                                                        <SelectiveScrollingGrid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </SelectiveScrollingGrid.ColumnDefinitions>
                                                        <DataGridCellsPresenter Grid.Column="1"
                                                                              ItemsPanel="{TemplateBinding ItemsPanel}"
                                                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                                        <DataGridDetailsPresenter Grid.Column="1"
                                                                                Grid.Row="1"
                                                                                SelectiveScrollingGrid.SelectiveScrollingOrientation="{Binding AreRowDetailsFrozen, ConverterParameter={x:Static SelectiveScrollingOrientation.Vertical}, Converter={x:Static DataGrid.RowDetailsScrollingConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                                                Visibility="{TemplateBinding DetailsVisibility}"/>
                                                        <DataGridRowHeader Grid.RowSpan="2"
                                                                         SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical"
                                                                         Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Row}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                                    </SelectiveScrollingGrid>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <DataTrigger Binding="{Binding Actif}" Value="False">
                                                        <Setter Property="Opacity" Value="0.6"/>
                                                    </DataTrigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter TargetName="RowBorder" Property="Background" Value="{StaticResource Primary}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="RowBorder" Property="Background" Value="{StaticResource Gray100}"/>
                                                    </Trigger>
                                                    <MultiTrigger>
                                                        <MultiTrigger.Conditions>
                                                            <Condition Property="IsSelected" Value="True"/>
                                                            <Condition Property="IsMouseOver" Value="True"/>
                                                        </MultiTrigger.Conditions>
                                                        <Setter TargetName="RowBorder" Property="Background" Value="{StaticResource PrimaryHover}"/>
                                                    </MultiTrigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </DataGrid.RowStyle>
                        </DataGrid>

                        <!-- Boutons d'action sur la liste -->
                        <Border Grid.Row="2" 
                                Background="{StaticResource Gray50}" 
                                CornerRadius="0,0,8,8"
                                Padding="20,16">
                            <StackPanel Orientation="Horizontal">
                                <Button Name="BtnModifier" Content="✏️ Modifier"
                                      Style="{StaticResource MaterialDesignRaisedButton}"
                                      Background="{StaticResource Warning}"
                                      Padding="16,8" 
                                      Margin="0,0,8,0" 
                                      IsEnabled="False" 
                                      Click="BtnModifier_Click"/>
                                <Button Name="BtnSupprimer" Content="🗑️ Supprimer"
                                      Style="{StaticResource DangerButton}"
                                      Padding="16,8" 
                                      Margin="0,0,8,0" 
                                      IsEnabled="False" 
                                      Click="BtnSupprimer_Click"/>
                                <Button Name="BtnActiver" Content="🔄 Activer/Désactiver"
                                      Style="{StaticResource MaterialDesignOutlineButton}"
                                      Padding="16,8" 
                                      Margin="0,0,16,0" 
                                      IsEnabled="False" 
                                      Click="BtnActiver_Click"/>

                                <!-- Séparateur -->
                                <Border Width="2" Height="32" 
                                      Background="{StaticResource Gray300}" 
                                      Margin="8,0"/>

                                <Button Name="BtnMonter" Content="⬆️ Monter"
                                      Style="{StaticResource MaterialDesignOutlineButton}"
                                      Padding="12,8" 
                                      Margin="16,0,4,0" 
                                      IsEnabled="False" 
                                      Click="BtnMonter_Click"/>
                                <Button Name="BtnDescendre" Content="⬇️ Descendre"
                                      Style="{StaticResource MaterialDesignOutlineButton}"
                                      Padding="12,8" 
                                      Margin="4,0,0,0" 
                                      IsEnabled="False" 
                                      Click="BtnDescendre_Click"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>

                <!-- Panneau de détail/édition -->
                <Border Grid.Column="2" Style="{StaticResource Card}">
                    <ScrollViewer>
                        <StackPanel Name="PanneauDetail">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                                <Border Background="{StaticResource Primary}" 
                                      Width="32" Height="32" 
                                      CornerRadius="8" Margin="0,0,12,0">
                                    <TextBlock Text="📝" FontSize="16" 
                                             Foreground="White"
                                             HorizontalAlignment="Center" 
                                             VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Détails / Édition" 
                                         FontSize="16" FontWeight="SemiBold" 
                                         Foreground="{StaticResource TextPrimary}"
                                         VerticalAlignment="Center"/>
                            </StackPanel>

                            <!-- Nom -->
                            <TextBlock Text="Nom du type" 
                                     FontSize="14" FontWeight="SemiBold"
                                     Foreground="{StaticResource TextPrimary}" 
                                     Margin="0,0,0,8"/>
                            <TextBox Name="TxtNom" 
                                   Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                   MaxLength="100"
                                   Margin="0,0,0,20"/>

                            <!-- Description -->
                            <TextBlock Text="Description" 
                                     FontSize="14" FontWeight="SemiBold"
                                     Foreground="{StaticResource TextPrimary}" 
                                     Margin="0,0,0,8"/>
                            <TextBox Name="TxtDescription" 
                                   Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                   Height="80" 
                                   TextWrapping="Wrap" 
                                   AcceptsReturn="True"
                                   VerticalContentAlignment="Top"
                                   VerticalScrollBarVisibility="Auto" 
                                   MaxLength="500"
                                   Margin="0,0,0,20"/>

                            <!-- Couleur -->
                            <TextBlock Text="Couleur d'affichage" 
                                     FontSize="14" FontWeight="SemiBold"
                                     Foreground="{StaticResource TextPrimary}" 
                                     Margin="0,0,0,8"/>
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="12"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Aperçu couleur -->
                                <Border Grid.Column="0" 
                                      Name="BorderApercu" 
                                      Width="48" Height="48" 
                                      BorderBrush="{StaticResource Gray300}" 
                                      BorderThickness="1" 
                                      CornerRadius="8"/>

                                <!-- Code couleur -->
                                <TextBox Grid.Column="2" 
                                       Name="TxtCouleur" 
                                       Text="#3498db" 
                                       Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                       FontFamily="Consolas"
                                       MaxLength="7"
                                       TextChanged="TxtCouleur_TextChanged"/>
                            </Grid>

                            <!-- Palette de couleurs prédéfinies -->
                            <TextBlock Text="Couleurs suggérées" 
                                     FontSize="14" FontWeight="SemiBold"
                                     Foreground="{StaticResource TextPrimary}" 
                                     Margin="0,0,0,8"/>
                            <WrapPanel Name="PaletteCouleurs" Margin="0,0,0,20"/>

                            <!-- Ordre d'affichage -->
                            <TextBlock Text="Ordre d'affichage" 
                                     FontSize="14" FontWeight="SemiBold"
                                     Foreground="{StaticResource TextPrimary}" 
                                     Margin="0,0,0,8"/>
                            <TextBox Name="TxtOrdre" 
                                   Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                   MaxLength="3"
                                   Margin="0,0,0,20"/>

                            <!-- Options -->
                            <StackPanel Margin="0,0,0,20">
                                <CheckBox Name="ChkActif" 
                                        Content="Type d'absence actif" 
                                        FontSize="14"
                                        Foreground="{StaticResource TextPrimary}"
                                        Margin="0,0,0,12" 
                                        IsChecked="True"/>
                                <CheckBox Name="ChkValidation" 
                                        Content="Nécessite une validation hiérarchique" 
                                        FontSize="14"
                                        Foreground="{StaticResource TextPrimary}"
                                        IsChecked="True"/>
                            </StackPanel>

                            <!-- Règles avancées -->
                            <TextBlock Text="Règles spécifiques" 
                                     FontSize="14" FontWeight="SemiBold"
                                     Foreground="{StaticResource TextPrimary}" 
                                     Margin="0,0,0,8"/>
                            <TextBox Name="TxtRegles" 
                                   Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                   Height="80" 
                                   TextWrapping="Wrap" 
                                   AcceptsReturn="True"
                                   VerticalContentAlignment="Top"
                                   VerticalScrollBarVisibility="Auto" 
                                   MaxLength="1000"
                                   Margin="0,0,0,8"/>
                            <TextBlock Text="Ex: Maximum 25 jours par an, Préavis de 2 semaines..." 
                                     FontSize="12" 
                                     Foreground="{StaticResource TextMuted}" 
                                     FontStyle="Italic" 
                                     Margin="0,0,0,24"/>

                            <!-- Boutons de validation -->
                            <StackPanel Orientation="Horizontal" 
                                      HorizontalAlignment="Center" 
                                      Margin="0,0,0,24">
                                <Button Name="BtnSauvegarder" Content="💾 Sauvegarder"
                                      Style="{StaticResource SecondaryButton}"
                                      Padding="16,10" 
                                      Margin="0,0,8,0" 
                                      Click="BtnSauvegarder_Click" 
                                      IsEnabled="False"/>
                                <Button Name="BtnAnnuler" Content="❌ Annuler"
                                      Background="{StaticResource Gray500}" 
                                      Foreground="White" 
                                      BorderThickness="0"
                                      Style="{StaticResource MaterialDesignRaisedButton}"
                                      Padding="16,10" 
                                      Click="BtnAnnuler_Click" 
                                      IsEnabled="False"/>
                            </StackPanel>

                            <!-- Informations supplémentaires -->
                            <Border Background="{StaticResource Gray50}" 
                                  CornerRadius="8" 
                                  Padding="16"
                                  Margin="0,8,0,0">
                                <TextBlock Name="TxtInfos" 
                                         Text="Sélectionnez un type pour voir les détails"
                                         TextWrapping="Wrap" 
                                         FontStyle="Italic" 
                                         FontSize="13"
                                         Foreground="{StaticResource TextMuted}"/>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Grid>

            <!-- Bouton Fermer -->
            <Border Grid.Row="2" 
                    Background="{StaticResource Surface}" 
                    BorderBrush="{StaticResource Gray200}" 
                    BorderThickness="0,1,0,0" 
                    CornerRadius="0,0,16,16"
                    Padding="32,16">
                <Button Name="BtnFermer" Content="🚪 Fermer"
                      Style="{StaticResource MaterialDesignOutlineButton}"
                      Padding="20,10"
                      HorizontalAlignment="Right"
                      Click="BtnFermer_Click"/>
            </Border>
        </Grid>
    </Border>
</Window>